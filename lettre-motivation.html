<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Générateur de lettre de motivation</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700&family=Source+Serif+4:wght@400;600&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box;margin:0;padding:0}

:root{
  --bg:#eef2f6;
  --bg-accent:#dfe8f7;
  --panel:#ffffff;
  --ink:#0f172a;
  --muted:#5b6475;
  --line:#e2e8f0;
  --accent:#0f766e;
  --accent-2:#2563eb;
  --shadow:0 16px 40px rgba(15, 23, 42, 0.12);
  --ui-font:"Manrope","Segoe UI",system-ui,sans-serif;
  --letter-font:"Source Serif 4","Times New Roman",serif;
}

/* ===== ÉCRAN ===== */
body{
  font-family:var(--ui-font);
  background:
    radial-gradient(800px 360px at 10% -10%, #f8fafc 0%, transparent 60%),
    radial-gradient(900px 420px at 90% 0%, var(--bg-accent) 0%, transparent 55%),
    var(--bg);
  color:var(--ink);
}

.container{
  max-width:1200px;
  margin:auto;
  padding:26px 20px 60px;
  min-height:100vh;
}

h1{
  text-align:center;
  margin-bottom:8px;
  font-size:28px;
  font-weight:700;
}

.consigne{
  text-align:center;
  color:var(--muted);
  font-size:14px;
  line-height:1.6;
  margin-bottom:22px;
}

.layout{
  display:grid;
  grid-template-columns:repeat(2, minmax(0, 1fr));
  gap:20px;
  align-items:start;
}

.panel{
  background:var(--panel);
  border:1px solid var(--line);
  border-radius:18px;
  padding:18px;
  box-shadow:var(--shadow);
}

.panel-title{
  display:flex;
  align-items:center;
  gap:8px;
  font-size:16px;
  font-weight:700;
  margin-bottom:12px;
}

/* FORMULAIRE */
.form{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:14px;
  margin-bottom:12px;
}

.field{
  display:flex;
  flex-direction:column;
  gap:4px;
}

label{
  font-size:13px;
  color:var(--muted);
  font-weight:600;
}

input{
  background:#f8fafc;
  color:var(--ink);
  border:1px solid var(--line);
  border-radius:10px;
  padding:10px 12px;
  font-size:15px;
}
input:focus{
  outline:2px solid rgba(37, 99, 235, 0.2);
  border-color:var(--accent-2);
}

/* ACTIONS */
.actions{
  display:flex;
  justify-content:flex-start;
  gap:12px;
  margin:14px 0 6px;
  flex-wrap:wrap;
}

.btn{
  padding:12px 16px;
  border-radius:12px;
  border:1px solid transparent;
  font-size:14px;
  font-weight:600;
  cursor:pointer;
  transition:transform .15s ease, box-shadow .15s ease, border .15s ease;
}
.btn.primary{
  background:linear-gradient(135deg, #0f766e, #14b8a6);
  color:#ffffff;
  box-shadow:0 12px 24px rgba(15, 118, 110, 0.28);
}
.btn.secondary{
  background:#eef2ff;
  color:#1e3a8a;
  border-color:#c7d2fe;
}
.btn.ghost{
  background:#ffffff;
  color:#334155;
  border-color:#cbd5f5;
}
.btn:hover{transform:translateY(-1px)}

/* ===== LETTRE ===== */
.preview-title{
  text-align:left;
  color:var(--accent);
  margin:0 0 8px;
  font-size:13px;
  font-weight:600;
}

.mobile-hint{
  text-align:left;
  color:var(--muted);
  font-size:12px;
  margin-bottom:10px;
}

.letter-wrap{
  background:#f8fafc;
  display:flex;
  justify-content:center;
  margin-top:10px;
  border-radius:16px;
  border:1px solid var(--line);
  box-shadow:inset 0 0 0 1px rgba(255,255,255,0.8);
  padding:18px;
  overflow:auto;
}

.letter{
  width:210mm;
  height:297mm;
  padding:25mm 25mm 18mm 25mm;
  font-size:12pt;
  line-height:1.45;
  color:#000;
  position:relative;
  background:#fff;
  font-family:var(--letter-font);
  box-shadow:0 24px 40px rgba(15, 23, 42, 0.2);
}

/* BLOCS */
.sender{position:absolute;top:25mm;left:25mm}
.recipient{position:absolute;top:55mm;right:20mm;width:80mm}
.date{position:absolute;top:77mm;right:20mm;width:80mm}

.object{
  position:absolute;
  top:98mm;
  left:25mm;
  right:25mm;
  font-weight:bold;
}

/* CORPS */
.body{
  position:absolute;
  top:112mm;
  left:25mm;
  right:25mm;
  height:145mm;
}

.body p{
  margin:0 0 3mm 0;
  text-align:justify;
}

/* SIGNATURE */
.signature{
  position:absolute;
  bottom:25mm;
  right:25mm;
  width:65mm;
}

@media (max-width: 980px){
  .layout{grid-template-columns:1fr}
}

@media (max-width: 720px){
  .container{padding:18px 14px 40px}
  h1{font-size:22px}
  .consigne{font-size:13px}
  .panel{padding:14px}
  .form{grid-template-columns:1fr;gap:10px}
  input{padding:12px;font-size:16px}
  .actions{flex-direction:column;gap:10px}
  .btn{width:100%}
  .preview-title{margin-top:6px}
  .letter-wrap{padding:12px}
  .letter{
    width:100%;
    height:auto;
    min-height:auto;
    padding:16px;
    font-size:15px;
    line-height:1.6;
    position:relative;
  }
  .sender,
  .recipient,
  .date,
  .object,
  .body,
  .signature{
    position:static;
    width:auto;
    height:auto;
    margin-bottom:12px;
  }
  .recipient{margin-top:4px}
  .date{text-align:right;margin-top:-6px}
  .object{font-weight:bold;margin-top:6px}
  .body p{margin-bottom:10px;text-align:left}
  .signature{margin-bottom:0;text-align:right}
}

/* ===== IMPRESSION ===== */
@page{
  size:A4;
  margin:0;
}
@media print{
  html, body{
    background:#fff;
    width:210mm;
    height:297mm;
  }
  *{
    -webkit-print-color-adjust:exact;
    print-color-adjust:exact;
  }
  body *{visibility:hidden}
  .letter,.letter *{visibility:visible}
  .container,
  .layout,
  .panel,
  .letter-wrap{
    margin:0;
    padding:0;
    border:0;
    box-shadow:none;
    background:transparent;
  }
  .letter-wrap{
    display:block;
  }
  .letter{
    position:absolute;
    top:0;
    left:0;
    margin:0;
    box-shadow:none;
    page-break-inside:avoid;
    width:210mm;
    height:297mm;
  }
  .sender{position:absolute;top:25mm;left:25mm}
  .recipient{position:absolute;top:55mm;right:20mm;width:80mm}
  .date{position:absolute;top:77mm;right:20mm;width:80mm}
  .object{position:absolute;top:98mm;left:25mm;right:25mm;font-weight:bold}
  .body{position:absolute;top:112mm;left:25mm;right:25mm;height:145mm}
  .signature{position:absolute;bottom:25mm;right:25mm;width:65mm}
}
</style>

  <link rel="stylesheet" href="mobile.css">
</head>

<body>
<div class="container">

<h1>Générateur de lettre de motivation</h1>

<div class="consigne">
📄 <strong>Télécharger la lettre</strong><br>
1️⃣ Cliquez sur <strong>📄 Télécharger</strong><br>
2️⃣ Choisissez <strong>Enregistrer en PDF</strong><br>
3️⃣ Format : <strong>A4 – Aucune marge</strong><br>
4️⃣ Nom du fichier : <strong>LM_ENTREPRISE.pdf</strong>
</div>

<div class="layout">
  <section class="panel">
    <div class="panel-title">🧾 Vos informations</div>
    <!-- FORMULAIRE -->
    <div class="form">
      <div class="field"><label>Prénom Nom</label><input id="nom"></div>
      <div class="field"><label>Adresse</label><input id="adresse"></div>
      <div class="field"><label>NPA Ville</label><input id="ville"></div>
      <div class="field"><label>Téléphone</label><input id="tel"></div>
      <div class="field"><label>Email</label><input id="email"></div>

      <div class="field"><label>Entreprise</label><input id="entreprise"></div>
      <div class="field"><label>Adresse entreprise</label><input id="adresseEnt"></div>
      <div class="field"><label>NPA Ville entreprise</label><input id="villeEnt"></div>

      <div class="field"><label>Poste</label><input id="poste"></div>
    </div>

    <div class="actions">
      <button class="btn secondary" onclick="setVersion('homme')">👨 Texte masculin</button>
      <button class="btn secondary" onclick="setVersion('femme')">👩 Texte féminin</button>
      <button class="btn ghost" onclick="resetDestinataire()">🔄 Effacer le destinataire</button>
      <button class="btn primary" onclick="window.print()">📄 Télécharger le PDF</button>
    </div>
  </section>

  <section class="panel">
    <div class="panel-title">📄 Aperçu</div>
    <p class="preview-title">Aperçu de la lettre (mise en page A4).</p>
    <p class="mobile-hint">Sur téléphone, l’aperçu s’adapte. La mise en page A4 est appliquée à l’impression.</p>

    <!-- LETTRE -->
    <div class="letter-wrap">
    <div class="letter">

  <div class="sender">
    <strong id="l-nom"></strong><br>
    <span id="l-adresse"></span><br>
    <span id="l-ville"></span><br>
    <span id="l-tel"></span><br>
    <span id="l-email"></span>
  </div>

  <div class="recipient">
    <strong id="l-entreprise"></strong><br>
    <span id="l-adresseEnt"></span><br>
    <span id="l-villeEnt"></span>
  </div>

  <div class="date" id="l-date"></div>

  <div class="object">
    Objet : Candidature comme <span id="l-poste"></span>
  </div>

  <div class="body" id="letterBody"></div>

  <div class="signature">
    <strong id="l-signature"></strong>
  </div>

</div>
    </div>
  </section>
</div>
</div>

<script>
/* ===== TEXTES ===== */
const LETTERS={
  homme:[
    "Madame, Monsieur,",
    "Par la présente, je vous adresse ma candidature afin de rejoindre votre entreprise. Souhaitant m’investir dans un cadre professionnel structuré, je suis motivé à contribuer activement au bon fonctionnement de votre organisation.",
    "Sérieux, organisé et rigoureux, je respecte les consignes de travail et les horaires. J’exécute les tâches confiées avec méthode et efficacité.",
    "Appréciant le travail en équipe, je m’intègre facilement et collabore de manière constructive.",
    "Je reste à votre disposition pour un entretien.",
    "Je vous prie d’agréer, Madame, Monsieur, mes salutations distinguées."
  ],
  femme:[
    "Madame, Monsieur,",
    "Par la présente, je vous adresse ma candidature afin de rejoindre votre entreprise. Souhaitant m’investir dans un environnement professionnel structuré, je suis motivée à contribuer activement au bon fonctionnement de votre organisation.",
    "Sérieuse, organisée et consciencieuse, je respecte les consignes de travail et les horaires. J’effectue les tâches confiées avec soin et efficacité.",
    "Habituée au travail en équipe, je m’intègre facilement et communique de manière respectueuse.",
    "Je reste à votre disposition pour un entretien.",
    "Je vous prie d’agréer, Madame, Monsieur, mes salutations distinguées."
  ]
};

/* ===== UTILITAIRES ===== */
function v(id){return document.getElementById(id).value;}
function l(id,val){document.getElementById(id).textContent=val;}

const fields=["nom","adresse","ville","tel","email","entreprise","adresseEnt","villeEnt","poste"];
const STORAGE_KEY="lm_autosave";

/* ===== VERSION TEXTE ===== */
function setVersion(type){
  const body=document.getElementById("letterBody");
  body.innerHTML="";
  LETTERS[type].forEach(t=>{
    const p=document.createElement("p");
    p.textContent=t;
    body.appendChild(p);
  });
}

/* ===== SAUVEGARDE AUTO ===== */
function saveData(){
  const data={};
  fields.forEach(id=>data[id]=v(id));
  localStorage.setItem(STORAGE_KEY,JSON.stringify(data));
}

function restoreData(){
  const saved=localStorage.getItem(STORAGE_KEY);
  if(!saved) return;
  const data=JSON.parse(saved);
  fields.forEach(id=>{
    if(data[id]!==undefined){
      document.getElementById(id).value=data[id];
    }
  });
}

/* ===== RESET DESTINATAIRE ===== */
function resetDestinataire(){
  ["entreprise","adresseEnt","villeEnt"].forEach(id=>{
    document.getElementById(id).value="";
  });
  update();
  saveData();
}

/* ===== MAJ ===== */
function update(){
  l("l-nom",v("nom"));
  l("l-adresse",v("adresse"));
  l("l-ville",v("ville"));
  l("l-tel",v("tel"));
  l("l-email",v("email"));
  l("l-entreprise",v("entreprise"));
  l("l-adresseEnt",v("adresseEnt"));
  l("l-villeEnt",v("villeEnt"));
  l("l-poste",v("poste"));
  l("l-signature",v("nom"));

  document.getElementById("l-date").textContent=
    `${v("ville")}, le ${new Date().toLocaleDateString("fr-CH")}`;

  saveData();
}

/* ===== INIT ===== */
fields.forEach(id=>document.getElementById(id).addEventListener("input",update));

document.addEventListener("DOMContentLoaded",()=>{
  restoreData();
  setVersion("homme");
  update();
});
</script>

</body>
</html>
